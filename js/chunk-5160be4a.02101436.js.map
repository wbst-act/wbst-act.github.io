{"version":3,"sources":["webpack:///../../../src/components/VSkeletonLoader/VSkeletonLoader.ts","webpack:///./src/components/EbirdDialog.vue","webpack:///src/components/EbirdDialog.vue","webpack:///./src/components/EbirdDialog.vue?c911","webpack:///./src/components/EbirdDialog.vue?bae4","webpack:///./src/views/History.vue","webpack:///src/views/History.vue","webpack:///./src/views/History.vue?bfce","webpack:///./src/views/History.vue?f1b2"],"names":["mixins","Elevatable","Measurable","Themeable","extend","name","props","boilerplate","Boolean","loading","loadingText","type","String","default","tile","transition","types","Object","computed","attrs","this","isLoading","undefined","$vuetify","lang","t","role","$attrs","classes","themeClasses","elevationClasses","$scopedSlots","rootTypes","actions","article","avatar","button","card","chip","heading","image","paragraph","sentences","table","text","methods","genBone","children","$createElement","staticClass","genBones","bone","length","split","generator","genStructure","Array","from","map","indexOf","mapBones","push","genSkeleton","getSlot","on","afterEnter","resetStyles","beforeEnter","onBeforeEnter","beforeLeave","onBeforeLeave","leaveCancelled","bones","replace","el","_initialStyle","display","style","setProperty","render","h","$listeners","class","measurableStyles","expression","_c","_vm","key","staticRenderFns","data","icons","mdiBird","mdiClose","record","birds","watch","newValue","event","ebird","dialog","eBird","created","$offlineStorage","get","mapState","getfamily","family","forEach","item","speciesCode","sid","$http","headers","apikey","then","date","$moment","ret","obsDt","obs","catch","$emit","locId","component","watchbirds","_v","_f","sheet","components","EbirdDialog","mdiFormatListBulleted","history","paths","selectedEvent","_this$$offlineStorage","filter","cancel","reverse","$set","find","goto","isOnline"],"mappings":"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","file":"js/chunk-5160be4a.02101436.js","sourcesContent":["// Styles\nimport './VSkeletonLoader.sass'\n\n// Mixins\nimport Elevatable from '../../mixins/elevatable'\nimport Measurable from '../../mixins/measurable'\nimport Themeable from '../../mixins/themeable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\nimport { getSlot } from '../../util/helpers'\nimport { PropValidator } from 'vue/types/options'\n\nexport interface HTMLSkeletonLoaderElement extends HTMLElement {\n  _initialStyle?: {\n    display: string | null\n    transition: string\n  }\n}\n\n/* @vue/component */\nexport default mixins(\n  Elevatable,\n  Measurable,\n  Themeable,\n).extend({\n  name: 'VSkeletonLoader',\n\n  props: {\n    boilerplate: Boolean,\n    loading: Boolean,\n    loadingText: {\n      type: String,\n      default: '$vuetify.loading',\n    },\n    tile: Boolean,\n    transition: String,\n    type: String,\n    types: {\n      type: Object,\n      default: () => ({}),\n    } as PropValidator<Record<string, string>>,\n  },\n\n  computed: {\n    attrs (): object {\n      if (!this.isLoading) return this.$attrs\n\n      return {\n        'aria-busy': !this.boilerplate ? true : undefined,\n        'aria-live': !this.boilerplate ? 'polite' : undefined,\n        'aria-label': !this.boilerplate ? this.$vuetify.lang.t(this.loadingText) : undefined,\n        role: !this.boilerplate ? 'alert' : undefined,\n        ...this.$attrs,\n      }\n    },\n    classes (): object {\n      return {\n        'v-skeleton-loader--boilerplate': this.boilerplate,\n        'v-skeleton-loader--is-loading': this.isLoading,\n        'v-skeleton-loader--tile': this.tile,\n        ...this.themeClasses,\n        ...this.elevationClasses,\n      }\n    },\n    isLoading (): boolean {\n      return !('default' in this.$scopedSlots) || this.loading\n    },\n    rootTypes (): Record<string, string> {\n      return {\n        actions: 'button@2',\n        article: 'heading, paragraph',\n        avatar: 'avatar',\n        button: 'button',\n        card: 'image, card-heading',\n        'card-avatar': 'image, list-item-avatar',\n        'card-heading': 'heading',\n        chip: 'chip',\n        'date-picker': 'list-item, card-heading, divider, date-picker-options, date-picker-days, actions',\n        'date-picker-options': 'text, avatar@2',\n        'date-picker-days': 'avatar@28',\n        heading: 'heading',\n        image: 'image',\n        'list-item': 'text',\n        'list-item-avatar': 'avatar, text',\n        'list-item-two-line': 'sentences',\n        'list-item-avatar-two-line': 'avatar, sentences',\n        'list-item-three-line': 'paragraph',\n        'list-item-avatar-three-line': 'avatar, paragraph',\n        paragraph: 'text@3',\n        sentences: 'text@2',\n        table: 'table-heading, table-thead, table-tbody, table-tfoot',\n        'table-heading': 'heading, text',\n        'table-thead': 'heading@6',\n        'table-tbody': 'table-row-divider@6',\n        'table-row-divider': 'table-row, divider',\n        'table-row': 'table-cell@6',\n        'table-cell': 'text',\n        'table-tfoot': 'text@2, avatar@2',\n        text: 'text',\n        ...this.types,\n      }\n    },\n  },\n\n  methods: {\n    genBone (text: string, children: VNode[]) {\n      return this.$createElement('div', {\n        staticClass: `v-skeleton-loader__${text} v-skeleton-loader__bone`,\n      }, children)\n    },\n    genBones (bone: string): VNode[] {\n      // e.g. 'text@3'\n      const [type, length] = bone.split('@') as [string, number]\n      const generator = () => this.genStructure(type)\n\n      // Generate a length array based upon\n      // value after @ in the bone string\n      return Array.from({ length }).map(generator)\n    },\n    // Fix type when this is merged\n    // https://github.com/microsoft/TypeScript/pull/33050\n    genStructure (type?: string): any {\n      let children = []\n      type = type || this.type || ''\n      const bone = this.rootTypes[type] || ''\n\n      // End of recursion, do nothing\n      /* eslint-disable-next-line no-empty, brace-style */\n      if (type === bone) {}\n      // Array of values - e.g. 'heading, paragraph, text@2'\n      else if (type.indexOf(',') > -1) return this.mapBones(type)\n      // Array of values - e.g. 'paragraph@4'\n      else if (type.indexOf('@') > -1) return this.genBones(type)\n      // Array of values - e.g. 'card@2'\n      else if (bone.indexOf(',') > -1) children = this.mapBones(bone)\n      // Array of values - e.g. 'list-item@2'\n      else if (bone.indexOf('@') > -1) children = this.genBones(bone)\n      // Single value - e.g. 'card-heading'\n      else if (bone) children.push(this.genStructure(bone))\n\n      return [this.genBone(type, children)]\n    },\n    genSkeleton () {\n      const children = []\n\n      if (!this.isLoading) children.push(getSlot(this))\n      else children.push(this.genStructure())\n\n      /* istanbul ignore else */\n      if (!this.transition) return children\n\n      /* istanbul ignore next */\n      return this.$createElement('transition', {\n        props: {\n          name: this.transition,\n        },\n        // Only show transition when\n        // content has been loaded\n        on: {\n          afterEnter: this.resetStyles,\n          beforeEnter: this.onBeforeEnter,\n          beforeLeave: this.onBeforeLeave,\n          leaveCancelled: this.resetStyles,\n        },\n      }, children)\n    },\n    mapBones (bones: string) {\n      // Remove spaces and return array of structures\n      return bones.replace(/\\s/g, '').split(',').map(this.genStructure)\n    },\n    onBeforeEnter (el: HTMLSkeletonLoaderElement) {\n      this.resetStyles(el)\n\n      if (!this.isLoading) return\n\n      el._initialStyle = {\n        display: el.style.display,\n        transition: el.style.transition,\n      }\n\n      el.style.setProperty('transition', 'none', 'important')\n    },\n    onBeforeLeave (el: HTMLSkeletonLoaderElement) {\n      el.style.setProperty('display', 'none', 'important')\n    },\n    resetStyles (el: HTMLSkeletonLoaderElement) {\n      if (!el._initialStyle) return\n\n      el.style.display = el._initialStyle.display || ''\n      el.style.transition = el._initialStyle.transition\n\n      delete el._initialStyle\n    },\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-skeleton-loader',\n      attrs: this.attrs,\n      on: this.$listeners,\n      class: this.classes,\n      style: this.isLoading ? this.measurableStyles : undefined,\n    }, [this.genSkeleton()])\n  },\n})\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-dialog',{attrs:{\"fullscreen\":\"\",\"hide-overlay\":\"\",\"persistent\":\"\"},on:{\"click:outside\":function($event){return _vm.$emit('ebird-close')}},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[(_vm.loading)?[_c('v-card',[_c('v-toolbar',{attrs:{\"color\":\"light-green darken-3\",\"dark\":\"\",\"dense\":\"\"}},[_c('v-toolbar-title',[_vm._v(\"連線查詢記錄中...\")])],1),_c('v-sheet',[_c('v-progress-linear',{attrs:{\"color\":\"green\",\"indeterminate\":\"\",\"rounded\":\"\",\"height\":\"6\"}}),_c('v-skeleton-loader',{attrs:{\"type\":\"list-item,           list-item-avatar, list-item-avatar,           list-item-avatar, list-item-avatar,           list-item-avatar, list-item-avatar,           list-item-avatar, list-item-avatar,           list-item-avatar, list-item-avatar,           list-item-avatar, list-item-avatar,           list-item-avatar, list-item-avatar,           list-item-avatar, list-item-avatar,           list-item-avatar, list-item-avatar,           list-item-avatar, list-item-avatar\"}})],1)],1)]:[_c('v-card',[_c('v-toolbar',{attrs:{\"color\":\"light-green darken-3\",\"dark\":\"\",\"dense\":\"\"}},[_c('v-toolbar-title',[_vm._v(_vm._s(_vm._f(\"moment\")(_vm.date,'YYYY-MM-DD'))+\" \"+_vm._s(_vm.event.name))]),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.$emit('ebird-close')}}},[_c('v-icon',[_vm._v(_vm._s(_vm.icons.mdiClose))])],1)],1),_c('v-list',[_c('v-list-item',[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(_vm.getfamily)+\"科 \"+_vm._s(_vm.record.length)+\"種 \")]),_c('v-list-item-subtitle',[_vm._v(\" \"+_vm._s(_vm.event.leader.join(' '))),(_vm.event.people > 0 )?_c('span',{staticClass:\"float-right\"},[_vm._v(\"參與 \"+_vm._s(_vm.event.people)+\" 人\")]):_vm._e()])],1),_c('v-list-item-action',[_c('v-btn',{attrs:{\"href\":`https://ebird.org/checklist/${_vm.event.ebird}`,\"target\":\"_blank\",\"icon\":\"\"}},[_c('v-icon',{attrs:{\"color\":\"green\"}},[_vm._v(_vm._s(_vm.icons.mdiBird)+\" \")])],1)],1)],1)],1),_c('v-list',[_c('v-divider'),_vm._l((_vm.record),function(bird,index){return [_c('v-list-item',{key:bird.speciesCode},[_c('v-list-item-avatar',[_vm._v(_vm._s(bird.howManyStr))]),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\" \"+_vm._s(_vm.birds[bird.speciesCode].name)),(index==0 || (index-1 >= 0  && _vm.birds[_vm.record[index-1].speciesCode].family != _vm.birds[bird.speciesCode].family))?_c('span',{staticClass:\"float-right caption\"},[_vm._v(_vm._s(_vm.birds[bird.speciesCode].family))]):_vm._e()]),(bird.comments)?_c('v-list-item-subtitle',[_vm._v(_vm._s(bird.comments))]):_vm._e()],1)],1),_c('v-divider')]})],2)],1)]],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\nv-dialog(v-model=\"dialog\" fullscreen hide-overlay @click:outside=\"$emit('ebird-close')\" persistent)\r\n  template(v-if=\"loading\")\r\n    v-card\r\n      v-toolbar(color=\"light-green darken-3\", dark, dense)\r\n        v-toolbar-title 連線查詢記錄中...\r\n      v-sheet\r\n        v-progress-linear(color='green' indeterminate rounded height=\"6\")\r\n        v-skeleton-loader(type=\"list-item, \\\r\n          list-item-avatar, list-item-avatar, \\\r\n          list-item-avatar, list-item-avatar, \\\r\n          list-item-avatar, list-item-avatar, \\\r\n          list-item-avatar, list-item-avatar, \\\r\n          list-item-avatar, list-item-avatar, \\\r\n          list-item-avatar, list-item-avatar, \\\r\n          list-item-avatar, list-item-avatar, \\\r\n          list-item-avatar, list-item-avatar, \\\r\n          list-item-avatar, list-item-avatar, \\\r\n          list-item-avatar, list-item-avatar\")\r\n  template(v-else)\r\n    v-card\r\n      v-toolbar(color=\"light-green darken-3\", dark, dense)\r\n        v-toolbar-title {{ date | moment('YYYY-MM-DD')}} {{ event.name }}\r\n        v-spacer\r\n        v-btn(icon @click=\"$emit('ebird-close')\")\r\n          v-icon {{ icons.mdiClose}}\r\n      v-list\r\n        v-list-item\r\n          v-list-item-content\r\n            v-list-item-title {{ getfamily }}科 {{ record.length }}種 \r\n            v-list-item-subtitle \r\n              | {{ event.leader.join(' ')}}\r\n              span.float-right(v-if=\"event.people > 0 \") 參與 {{ event.people }} 人\r\n          v-list-item-action\r\n            v-btn(:href=\"`https://ebird.org/checklist/${event.ebird}`\" target=\"_blank\" icon)\r\n              v-icon(color=\"green\") {{ icons.mdiBird }}                \r\n      v-list\r\n        v-divider\r\n        template(v-for=\"bird, index in record\")\r\n          v-list-item( :key=\"bird.speciesCode\" )\r\n            v-list-item-avatar\r\n              | {{ bird.howManyStr}}\r\n            v-list-item-content\r\n              v-list-item-title \r\n                | {{ birds[bird.speciesCode].name }}\r\n                span.float-right.caption(v-if=\"index==0 || (index-1 >= 0  && birds[record[index-1].speciesCode].family != birds[bird.speciesCode].family)\") {{ birds[bird.speciesCode].family }}\r\n              v-list-item-subtitle(v-if=\"bird.comments\") {{ bird.comments }}\r\n                \r\n          v-divider\r\n</template>\r\n\r\n<script>\r\nimport { mdiBird, mdiClose } from '@mdi/js'\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  name: 'EbirdDialog',\r\n  props: ['dialog', 'event'],\r\n  data: () => ({\r\n    icons: {\r\n      mdiBird,\r\n      mdiClose,\r\n    },\r\n    record: null,\r\n    birds: {},\r\n    loading: true,\r\n  }),\r\n  watch: {\r\n    async dialog(newValue) {\r\n      if (newValue) {\r\n        if (this.event.ebird && this.dialog) {\r\n          this.loading = true\r\n          await this.eBird(this.event.ebird)\r\n          this.loading = false\r\n        }\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.birds = this.$offlineStorage.get('birds')\r\n  },\r\n  computed: {\r\n    ...mapState(['apikey']),\r\n    getfamily() {\r\n      const family = []\r\n      this.record.forEach(item => {\r\n        if (family.indexOf(this.birds[item.speciesCode].family) == -1) {\r\n          family.push(this.birds[item.speciesCode].family)\r\n        }\r\n      })\r\n      return family.length\r\n    },\r\n  },\r\n  methods: {\r\n    async eBird(sid) {\r\n      return await this.$http\r\n        .get(`https://api.ebird.org/v2/product/checklist/view/${sid}`, {\r\n          headers: { 'X-eBirdApiToken': this.apikey },\r\n        })\r\n        .then(async ret => {\r\n          this.date = this.$moment(ret.data.obsDt, 'YYYY-MM-DD HH:SS')\r\n          //this.location = await this.HotspotName(ret.data.locId)\r\n          this.record = ret.data.obs\r\n        })\r\n        .catch(() => {\r\n          this.$emit('ebird-close')\r\n        })\r\n    },\r\n    async HotspotName(locId) {\r\n      return await this.$http\r\n        .get(`https://api.ebird.org/v2/ref/hotspot/info/${locId}`, {\r\n          headers: { 'X-eBirdApiToken': this.apikey },\r\n        })\r\n        .then(ret => {\r\n          return ret.data.name\r\n        })\r\n        .catch(() => {\r\n          return '私人熱點'\r\n        })\r\n    },\r\n  },\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbirdDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbirdDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EbirdDialog.vue?vue&type=template&id=615945b4&lang=pug&\"\nimport script from \"./EbirdDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./EbirdDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-main',[_c('v-alert',{staticClass:\"ma-2\",attrs:{\"type\":\"info\",\"border\":\"top\",\"colored-border\":\"\",\"elevation\":\"2\"}},[_c('div',{staticClass:\"caption\"},[_vm._v(\" 例行活動結束,記錄員如果會使用eBird,請分享記錄給\\\"wbst act\\\",加速資料更新。\")])]),(_vm.loading)?_c('v-skeleton-loader',{attrs:{\"type\":\"list-item-avatar-two-line, list-item-avatar-two-line,       list-item-avatar-two-line,list-item-avatar-two-line,       list-item-avatar-two-line,list-item-avatar-two-line,       list-item-avatar-two-line,list-item-avatar-two-line,       list-item-avatar-two-line,list-item-avatar-two-line,       list-item-avatar-two-line,list-item-avatar-two-line\"}}):_c('v-list',[_c('v-divider'),_vm._l((_vm.history),function(item){return [(item.ebird!='')?_c('v-list-item',{attrs:{\"link\":\"\"},on:{\"click\":function($event){return _vm.goto(item)}}},[(item.watchbirds > 0)?[_c('v-list-item-avatar',{staticClass:\"white--text\",attrs:{\"color\":\"green\",\"size\":\"36\"}},[_vm._v(_vm._s(item.watchbirds))])]:[_c('v-list-item-avatar',{attrs:{\"size\":\"28\"}})],_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(_vm.$i18n.locale=='en' ? item.path.ename : item.name)),_c('span',{staticClass:\"caption float-right\"},[_vm._v(_vm._s(_vm._f(\"moment\")(item.date,'YYYY-MM-DD'))+\" \")])])],1),_c('v-list-item-action',[_c('v-icon',{attrs:{\"color\":\"green\",\"dark\":\"\"}},[_vm._v(_vm._s(_vm.icons.mdiFormatListBulleted))])],1)],2):_vm._e(),_c('v-divider')]})],2),_c('ebird-dialog',{attrs:{\"dialog\":_vm.dialog,\"event\":_vm.selectedEvent},on:{\"ebird-close\":function($event){_vm.dialog=false}}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\nv-main\r\n  v-alert.ma-2(type=\"info\" border=\"top\" colored-border  elevation=\"2\") \r\n    .caption  例行活動結束,記錄員如果會使用eBird,請分享記錄給\"wbst act\",加速資料更新。\r\n  v-skeleton-loader(v-if=\"loading\", \r\n    type=\"list-item-avatar-two-line, list-item-avatar-two-line, \\\r\n      list-item-avatar-two-line,list-item-avatar-two-line, \\\r\n      list-item-avatar-two-line,list-item-avatar-two-line, \\\r\n      list-item-avatar-two-line,list-item-avatar-two-line, \\\r\n      list-item-avatar-two-line,list-item-avatar-two-line, \\\r\n      list-item-avatar-two-line,list-item-avatar-two-line\")\r\n  v-list(v-else)\r\n    v-divider  \r\n    template(v-for=\"item in history\")\r\n      v-list-item(v-if=\"item.ebird!=''\" link @click='goto(item)')\r\n        template(v-if='item.watchbirds > 0')\r\n          v-list-item-avatar.white--text(color='green' size='36') {{ item.watchbirds}}\r\n        template(v-else)\r\n          v-list-item-avatar(size='28')          \r\n        v-list-item-content\r\n          v-list-item-title\r\n            | {{ $i18n.locale=='en' ? item.path.ename : item.name }}\r\n            span.caption.float-right {{ item.date | moment('YYYY-MM-DD')}} \r\n        v-list-item-action      \r\n          v-icon(color='green' dark) {{ icons.mdiFormatListBulleted }}\r\n      //\r\n        v-list-item(v-else)\r\n          template(v-if='item.watchbirds > 0')\r\n            v-list-item-avatar.white--text(color='green' size='36') {{ item.watchbirds}}\r\n          template(v-else)\r\n            v-list-item-avatar(size='28')\r\n          v-list-item-content\r\n            v-list-item-title\r\n              | {{ item.name }}\r\n              span.caption.float-right {{ item.date | moment('YYYY-MM-DD')}} \r\n          v-list-item-action\r\n      v-divider\r\n  ebird-dialog(:dialog='dialog' :event='selectedEvent' @ebird-close=\"dialog=false\")\r\n</template>\r\n\r\n<script>\r\nimport { mdiFormatListBulleted } from '@mdi/js'\r\nimport EbirdDialog from '@/components/EbirdDialog.vue'\r\nimport sheet from '@/mixins/sheet'\r\nexport default {\r\n  name: 'History',\r\n  mixins: [sheet],\r\n  components: { EbirdDialog },\r\n  data: () => ({\r\n    icons: {\r\n      mdiFormatListBulleted,\r\n    },\r\n    history: [],\r\n    paths: [],\r\n    selectedEvent: null,\r\n    loading: true,\r\n    dialog: false,\r\n    sid: '',\r\n  }),\r\n  async mounted() {\r\n    this.loading = true\r\n    const data = this.$offlineStorage.get('activity')\r\n    this.paths = this.$offlineStorage.get('paths') ?? []\r\n    this.history = data\r\n      .filter(\r\n        item =>\r\n          this.$moment(item.date, 'YYYY/MM/DD') < this.$moment() &&\r\n          item.cancel != 'y'\r\n      )\r\n      .reverse()\r\n    this.history.forEach(event =>\r\n      this.$set(\r\n        event,\r\n        'path',\r\n        this.paths.find(item => item.name == event.name)\r\n      )\r\n    )\r\n\r\n    this.loading = false\r\n  },\r\n  methods: {\r\n    goto(item) {\r\n      if (this.isOnline) {\r\n        this.selectedEvent = item\r\n        if (this.selectedEvent && this.selectedEvent.ebird) this.dialog = true\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./History.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./History.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./History.vue?vue&type=template&id=a0edc02e&lang=pug&\"\nimport script from \"./History.vue?vue&type=script&lang=js&\"\nexport * from \"./History.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}